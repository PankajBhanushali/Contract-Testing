graph TD
    subgraph Consumer Side
        CS["1Ô∏è‚É£ Consumer Service"] --> CT["2Ô∏è‚É£ Consumer Test Suite"]
        CT --> GCP["3Ô∏è‚É£ Generate Pact Contract"]
        GCP --> PCPB["4Ô∏è‚É£ Publish Contract to Pact Broker"]
        style CS fill:#b0e0e6,stroke:#333,stroke-width:2px
        style CT fill:#b0e0e6,stroke:#333,stroke-width:2px
        style GCP fill:#b0e0e6,stroke:#333,stroke-width:2px
        style PCPB fill:#b0e0e6,stroke:#333,stroke-width:2px
    end

    subgraph Broker
        PB["üîß Pact Broker<br/>Stores & Manages Contracts"]
        style PB fill:#add8e6,stroke:#333,stroke-width:2px
    end

    subgraph Provider Side
        PS["5Ô∏è‚É£ Provider Service"] --> PVT["6Ô∏è‚É£ Provider Verification Tests<br/>Fetch Pact from Broker"]
        PVT --> PVR["7Ô∏è‚É£ Publish Verification Results"]
        style PS fill:#90ee90,stroke:#333,stroke-width:2px
        style PVT fill:#90ee90,stroke:#333,stroke-width:2px
        style PVR fill:#90ee90,stroke:#333,stroke-width:2px
    end

    subgraph CI/CD & Deployment
        CVCI["8Ô∏è‚É£ Continuous Verification in CI"] --> SD["9Ô∏è‚É£ Safe Deployment"]
        style CVCI fill:#d3d3d3,stroke:#333,stroke-width:2px
        style SD fill:#d3d3d3,stroke:#333,stroke-width:2px
    end

    PCPB -->|"Step 4"| PB
    PB -->|"Step 6"| PVT
    PVR -->|"Step 7"| PB
    PB -->|"Step 8"| CVCI

    classDef ConsumerClass fill:#e0f7fa,stroke:#00796b,stroke-width:2px;
    classDef ProviderClass fill:#e8f5e9,stroke:#33691e,stroke-width:2px;
    classDef BrokerClass fill:#e1f5fe,stroke:#2196f3,stroke-width:2px;
    classDef CIDeployClass fill:#eceff1,stroke:#455a64,stroke-width:2px;

    class CS,CT,GCP,PCPB ConsumerClass
    class PS,PVT,PVR ProviderClass
    class PB BrokerClass
    class CVCI,SD CIDeployClass

    %% FLOW ORDER:
    %% 1. Consumer Service starts
    %% 2. Consumer Test Suite runs and defines expectations
    %% 3. Generate Pact Contract from test expectations
    %% 4. Publish Contract to Pact Broker
    %% 5. Provider Service listens for requests
    %% 6. Provider Verification Tests fetch Pact from Broker
    %% 7. Provider publishes verification results
    %% 8. CI/CD Pipeline runs continuous verification
    %% 9. Safe Deployment if all verifications pass
